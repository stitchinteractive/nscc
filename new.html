<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<title>Account Creation Form</title>
		<!-- favicon -->
		<link rel="icon" type="image/x-icon" href="im/favicon.ico" />
		<!-- fonts -->
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap" rel="stylesheet" />
		<!-- core theme ccs (includes bootstrap) -->
		<link href="css/styles.css" rel="stylesheet" />
		<link href="css/new.css" rel="stylesheet" />
		<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	</head>
	<body>
		<div class="new-container container-flex">
			<navbar>
				<a class="navbar-brand" href="#"><img src="im/logo.png" alt="nscc logo" /></a>
			</navbar>
			<div class="new-row row-flex">
				<div class="start-content" id="start-content">
					<h3>Create your new NSCC Account</h3>
					<p>
						Welcome to the NSCC Account Creation Form.<br />
						<br />
						Please fill in the form below to create your user account.<br class="hide-sm" />
						Please note that it may take up to 7 working days to process your request.
					</p>
					<div class="hide-lg" style="display: flex; flex-direction: row; justify-content: flex-end">
						<button id="continue0" type="button" class="btn btn-primary"><h4>Get started</h4></button>
					</div>
				</div>
				<div class="form-content" id="form-content">
					<div class="progress-bar vert-flex hide-md" id="progress-bar">
						<span id="dot-1" class="dot"><h3 class="prevent-select">1</h3></span>
						<div id="progress-line-1" class="progress-line">
							<div id="progress-line-one" style="display: block; width: 0%; background-color: #e2231a"></div>
						</div>
						<span id="dot-2" class="dot"><h3 class="prevent-select">2</h3></span>
						<div id="progress-line-2" class="progress-line">
							<div id="progress-line-two" style="display: block; width: 0%; background-color: #e2231a"></div>
						</div>
						<span id="dot-3" class="dot"><h3 class="prevent-select">3</h3></span>
						<div id="progress-line-3" class="progress-line">
							<div id="progress-line-three" style="display: block; width: 0%; background-color: #e2231a"></div>
						</div>
						<span id="dot-4" class="dot"><h3 class="prevent-select">4</h3></span>
					</div>
					<div class="step-1 step-content" id="step-1">
						<h3>Personal Information</h3>
						<div class="form-group">
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Sarah" />
									<label for="floatingInput">First name</label>
								</div>
								<div class="invalid-feedback">This is a mandatory field.</div>
							</div>
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Tan" />
									<label for="floatingPassword">Last name</label>
								</div>
								<div class="invalid-feedback">This is a mandatory field.</div>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Singaporean" />
									<label for="floatingInput">Nationality</label>
								</div>
								<div class="invalid-feedback">
									Please select a valid nationality.<br />
									Did you mean Singaporean?
								</div>
							</div>
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="AcmeRD01" />
									<label for="floatingInput">Preferred User ID</label>
								</div>
								<div class="invalid-feedback">Please enter a unique user ID that is 8 characters or less.</div>
							</div>
						</div>
						<div class="hide-md" style="display: flex; flex-direction: row; justify-content: flex-end">
							<button id="continue1" type="button" class="btn btn-primary"><h4>Continue</h4></button>
						</div>
						<line class="hide-md"></line>
					</div>
					<div class="step-2 step-content" id="step-2">
						<h3>Organizational Information</h3>
						<div class="form-group">
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Acme Innovations" />
									<label for="floatingInput">Company</label>
								</div>
								<div class="invalid-feedback">This is a mandatory field.</div>
							</div>
							<div class="hide-sm"></div>
						</div>
						<div class="form-group">
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Research and Development" />
									<label for="floatingInput">Organization / Department</label>
								</div>
								<div class="invalid-feedback">This is a mandatory field.</div>
							</div>
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="text" class="form-control" id="floatingInput" placeholder="Research Scientist" />
									<label for="floatingInput">Designation</label>
								</div>
								<div class="invalid-feedback">This is a mandatory field.</div>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="tel" class="form-control" id="floatingInput" placeholder="+65 8875 8875" />
									<label for="floatingInput">Contact number</label>
								</div>
								<div class="invalid-feedback">Please enter a valid Singapore phone number.</div>
							</div>
							<div class="input-group has-validation">
								<div class="form-floating">
									<input type="email" class="form-control" id="floatingInput" placeholder="sarah.tan@acmeinnovations.com" />
									<label for="floatingInput">Email address</label>
								</div>
								<div class="invalid-feedback">Please enter a valid email address that is not from a private email domain (e.g. gmail.com, yahoo.com).</div>
							</div>
						</div>
						<div class="hide-md" style="display: flex; flex-direction: row; justify-content: flex-end">
							<button id="continue2" type="button" class="btn btn-primary"><h4>Continue</h4></button>
						</div>
						<line class="hide-md"></line>
					</div>
					<div class="step-3 step-content" id="step-3">
						<h3>Project Information</h3>
						<div class="form-group">
							<div class="form-floating">
								<input type="text" class="form-control" id="floatingInput" placeholder="ACME_RD_2023" />
								<label for="floatingInput">Project ID (if applicable)</label>
							</div>

							<div class="input-group has-validation">
								<div class="row-flex-max">
									<input class="form-control" type="file" id="formFile" style="display: flex; padding: 16px; padding-left: 22px" />
									<label for="formFile" class="form-label">Upload sponsorship form</label>
								</div>
								<div class="invalid-feedback">Please upload a valid sponsorship form in PDF or Word format with extension .pdf, .doc, or .docx.</div>
							</div>
						</div>

						<div class="hide-md" style="display: flex; flex-direction: row; justify-content: flex-end">
							<button id="continue3" type="button" class="btn btn-primary hide-lg"><h4>Continue</h4></button>
						</div>
						<line class="hide-md"></line>
					</div>
					<div class="step-4 step-content" id="step-4">
						<div class="form-group">
							<form action="?" method="POST">
								<div class="g-recaptcha" data-sitekey="6Le_RcMlAAAAAF-Tmm2ezyxMPNfmXVCSDBYBxPvW" data-size="normal"></div>
							</form>

							<div class="input-group has-validation">
								<div class="form-control" id="floatingInput" placeholder="sarah.tan@acmeinnovations.com" style="padding: 16px">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" />
										<label class="form-check-label" for="flexCheckDefault" style="font-size: 14px">I accept the NSCC terms and conditions and privacy policy.</label>
									</div>
								</div>
								<div class="invalid-feedback">Please check the box to confirm that you accept the terms and conditions and privacy policy.</div>
							</div>
						</div>

						<div style="display: flex; flex-direction: row; justify-content: flex-end">
							<button id="submit-button" type="button" class="btn btn-primary"><h4>Create Account</h4></button>
						</div>
						<line class="hide-md"></line>
					</div>
				</div>
			</div>
		</div>

		<!-- HTML code for the overlay -->
		<div id="overlay" class="overlay-container" style="display: none">
			<div class="white-box">
				<iframe src="https://embed.lottiefiles.com/animation/96237"></iframe>
			</div>
		</div>

		<script>
			// Define variables for all elements
			const startContent = document.getElementById("start-content")
			const formContent = document.getElementById("form-content")
			const progressBar = document.getElementById("progress-bar")
			const step1 = document.getElementById("step-1")
			const step2 = document.getElementById("step-2")
			const step3 = document.getElementById("step-3")
			const step4 = document.getElementById("step-4")
			const continue0Btn = document.getElementById("continue0")
			const continue1Btn = document.getElementById("continue1")
			const continue2Btn = document.getElementById("continue2")
			const continue3Btn = document.getElementById("continue3")

			let currentState = 0 // Initialize current state to state 0
			let mobileState = 0 // Initialize current state to state 0

			function updateState(currentState) {
				// Add event listeners for each button to change the state accordingly
				if (currentState === 0) {
					startContent.style.display = "flex"
					formContent.style.display = "none"
				}

				if (currentState === 1) {
					startContent.style.display = "none"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "flex"
					step2.style.display = "none"
					step3.style.display = "none"
					step4.style.display = "none"
					setProgressState(1)
				}

				if (currentState === 2) {
					startContent.style.display = "none"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "none"
					step2.style.display = "flex"
					step3.style.display = "none"
					step4.style.display = "none"
					setProgressState(2)
				}

				if (currentState === 3) {
					startContent.style.display = "none"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "none"
					step2.style.display = "none"
					step3.style.display = "flex"
					step4.style.display = "none"
					setProgressState(3)
				}

				if (currentState === 4) {
					startContent.style.display = "none"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "none"
					step2.style.display = "none"
					step3.style.display = "none"
					step4.style.display = "flex"
					setProgressState(4)
				}

				if (currentState === 5) {
					startContent.style.display = "none"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "flex"
					step2.style.display = "flex"
					step3.style.display = "flex"
					step4.style.display = "flex"
				}

				if (currentState === 6) {
					startContent.style.display = "flex"
					formContent.style.display = "flex"
					progressBar.style.display = "flex"
					step1.style.display = "flex"
					step2.style.display = "flex"
					step3.style.display = "flex"
					step4.style.display = "flex"
				}
			}

			// Get the viewport width at page load
			var viewportWidth = window.innerWidth || document.documentElement.clientWidth

			if (viewportWidth > 992) {
				updateState(6)
			} else {
				updateState(0)
			}

			continue0Btn.addEventListener("click", function () {
				var viewportWidth = window.innerWidth || document.documentElement.clientWidth
				mobileState = 1
				if (viewportWidth > 768) {
					updateState(5)
				} else {
					updateState(1)
				}
			})

			continue1Btn.addEventListener("click", function () {
				mobileState = 2
				updateState(2)
			})
			continue2Btn.addEventListener("click", function () {
				mobileState = 3
				updateState(3)
			})
			continue3Btn.addEventListener("click", function () {
				mobileState = 4
				updateState(4)
			})

			// Add event listener to check viewport size on resize
			window.addEventListener("resize", function () {
				// Get the updated viewport width
				var viewportWidth = window.innerWidth || document.documentElement.clientWidth

				// If viewport width is greater than 1024px (laptop size)
				if (viewportWidth > 992) {
					// Show the element with ID "start-content"
					updateState(6)
				} else if (viewportWidth > 768) {
					if (mobileState === 0) {
						updateState(0)
					} else {
						updateState(5)
					}
				} else {
					// Hide the element with ID "start-content"
					updateState(mobileState)
				}
			})

			// progress bar

			// Store the progress elements in an array
			const progressElems = [document.getElementById("dot-1"), document.getElementById("progress-line-1"), document.getElementById("dot-2"), document.getElementById("progress-line-2"), document.getElementById("dot-3"), document.getElementById("progress-line-3"), document.getElementById("dot-4")]

			// Set the initial state of the progress bar
			setProgressState(1)

			function setProgressState(state) {
				// Loop through each progress element and update its color
				for (let i = 0; i < progressElems.length; i++) {
					// If state 1 is selected, change dot1 to red, and everything else to gray
					if (state === 1) {
						if (i === 0) {
							progressElems[i].classList.add("dot-red")
						} else {
							progressElems[i].classList.remove("dot-red")
						}
						removeProgressBar(1)
						removeProgressBar(2)
						removeProgressBar(3)
					}
					// If state 2 is selected, change dot1, line1, and dot2 to red, and everything else to gray
					if (state === 2) {
						if (i === 0 || i === 1 || i === 2) {
							progressElems[i].classList.add("dot-red")
						} else {
							progressElems[i].classList.remove("dot-red")
						}
						startProgressBar(1)
						removeProgressBar(2)
						removeProgressBar(3)
					}
					// If state 3 is selected, change dot1, line1, dot2, and line2 to red, and everything else to gray
					if (state === 3) {
						if (i === 0 || i === 1 || i === 2 || i === 3 || i === 4) {
							progressElems[i].classList.add("dot-red")
						} else {
							progressElems[i].classList.remove("dot-red")
						}
						setProgressBar(1)
						startProgressBar(2)
						removeProgressBar(3)
					}
					// If state 4 is selected, change everything to red
					if (state === 4) {
						progressElems[i].classList.add("dot-red")
						if (i % 2 === 1) {
						}
						setProgressBar(1)
						setProgressBar(2)
						startProgressBar(3)
					}
				}
			}

			// Example usage: set the progress bar to state 3
			setProgressState(1)

			const dot1 = document.getElementById("dot-1")

			dot1.addEventListener("click", () => {
				mobileState = 1
				updateState(1)
			})
			const dot2 = document.getElementById("dot-2")

			dot2.addEventListener("click", () => {
				mobileState = 2
				updateState(2)
			})
			const dot3 = document.getElementById("dot-3")

			dot3.addEventListener("click", () => {
				mobileState = 3
				updateState(3)
			})
			const dot4 = document.getElementById("dot-4")

			dot4.addEventListener("click", () => {
				mobileState = 4
				updateState(4)
			})

			function startProgressBar(bar) {
				// Get the progress bar element
				const progressBar1 = document.getElementById("progress-line-one")
				const progressBar2 = document.getElementById("progress-line-two")
				const progressBar3 = document.getElementById("progress-line-three")

				// Set the initial width to 0%
				let width = 0
				let savedMobileState = mobileState

				// Define the interval time in milliseconds
				const intervalTime = 2

				// Define the increment value for each interval
				const increment = 1

				// Set an interval to update the progress bar
				const interval = setInterval(function () {
					// Increment the width by the increment value
					width += increment
					// Set the width of the progress bar element
					if (bar === 1) {
						progressBar1.style.width = width + "%"
					}
					if (bar === 2) {
						progressBar2.style.width = width + "%"
					}
					if (bar === 3) {
						progressBar3.style.width = width + "%"
					}

					// If the width is equal to or greater than 100%, stop the interval
					if (width >= 100) {
						clearInterval(interval)
					}

					if (savedMobileState > mobileState) {
						if (bar === 1) {
							progressBar1.style.width = 0 + "%"
						}
						if (bar === 2) {
							progressBar2.style.width = 0 + "%"
						}
						if (bar === 3) {
							progressBar3.style.width = 0 + "%"
						}
						return
					}

					if (savedMobileState < mobileState) {
						if (bar === 1) {
							progressBar1.style.width = 100 + "%"
						}
						if (bar === 2) {
							progressBar2.style.width = 100 + "%"
						}
						if (bar === 3) {
							progressBar3.style.width = 100 + "%"
						}
						return
					}
				}, intervalTime)
			}

			function removeProgressBar(bar) {
				// Get the progress bar element
				const progressBar1 = document.getElementById("progress-line-one")
				const progressBar2 = document.getElementById("progress-line-two")
				const progressBar3 = document.getElementById("progress-line-three")

				if (bar === 1) {
					progressBar1.style.width = 0 + "%"
				}
				if (bar === 2) {
					progressBar2.style.width = 0 + "%"
				}
				if (bar === 3) {
					progressBar3.style.width = 0 + "%"
				}
			}
			function setProgressBar(bar) {
				// Get the progress bar element
				const progressBar1 = document.getElementById("progress-line-one")
				const progressBar2 = document.getElementById("progress-line-two")
				const progressBar3 = document.getElementById("progress-line-three")

				if (bar === 1) {
					progressBar1.style.width = 100 + "%"
				}
				if (bar === 2) {
					progressBar2.style.width = 100 + "%"
				}
				if (bar === 3) {
					progressBar3.style.width = 100 + "%"
				}
			}

			var overlay = document.getElementById("overlay")
			var submitButton = document.getElementById("submit-button")

			// Show the overlay when the submit button is clicked
			submitButton.addEventListener("click", function () {
				overlay.style.display = "block"
			})

			// Hide the overlay when the user clicks outside the white box
			overlay.addEventListener("click", function (event) {
				if (event.target === overlay) {
					overlay.style.display = "none"
				}
			})
		</script>

		<!-- bootstrap core js -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
		<!-- core theme js -->
		<script src="js/scripts.js"></script>

		<!-- bootstrap core js -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
		<!-- core theme js -->
		<script src="js/scripts.js"></script>
	</body>
</html>
